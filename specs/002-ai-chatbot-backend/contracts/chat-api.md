# Chat API Specification

## Chat Endpoint
- **URL**: `POST /chat`
- **Description**: Send a message to the AI chatbot and receive a response
- **Authentication**: None required

### Request
**Content-Type**: `application/json`

**Body**:
```json
{
  "message": {
    "type": "string",
    "description": "The user's message to the chatbot",
    "example": "What is the difference between forward and inverse kinematics?"
  },
  "context": {
    "type": "object",
    "description": "Optional conversation context",
    "properties": {
      "conversation_id": {
        "type": "string",
        "description": "ID of the current conversation (for future use)"
      },
      "previous_messages": {
        "type": "array",
        "description": "Previous messages in the conversation (short-lived context)",
        "items": {
          "type": "object",
          "properties": {
            "sender": {"type": "string"},
            "content": {"type": "string"}
          }
        }
      }
    },
    "optional": true
  }
}
```

### Response
**Content-Type**: `application/json`

**Success Response (200 OK)**:
```json
{
  "response": {
    "type": "string",
    "description": "The AI-generated response to the user's message",
    "example": "Forward kinematics calculates the position of the end effector given joint angles, while inverse kinematics calculates the required joint angles to achieve a desired end effector position."
  },
  "metadata": {
    "type": "object",
    "description": "Additional information about the response",
    "properties": {
      "confidence": {
        "type": "number",
        "description": "Confidence level of the response (0-1)",
        "example": 0.95
      },
      "sources": {
        "type": "array",
        "description": "Sources used to generate the response",
        "items": {"type": "string"},
        "example": ["Chapter 4: Kinematics", "Section 4.2: Forward Kinematics"]
      },
      "processing_time": {
        "type": "number",
        "description": "Time taken to process the request in seconds",
        "example": 1.23
      },
      "tool_calls": {
        "type": "array",
        "description": "Tools used to generate the response",
        "items": {
          "type": "object",
          "properties": {
            "name": {"type": "string"},
            "arguments": {"type": "object"}
          }
        }
      }
    }
  },
  "suggestions": {
    "type": "array",
    "description": "Suggested follow-up questions or topics",
    "items": {"type": "string"},
    "example": [
      "Can you explain Jacobian matrices?",
      "What are the applications of inverse kinematics?",
      "How do you solve inverse kinematics for a 6-DOF robot arm?"
    ]
  }
}
```

### Error Responses
- **400 Bad Request**: Invalid request format
- **429 Rate Limited**: Too many requests
- **500 Internal Server Error**: Server processing error
- **503 Service Unavailable**: LLM service unavailable

## Health Check Endpoint
- **URL**: `GET /health`
- **Description**: Check the health status of the service
- **Authentication**: None required

### Response
**Content-Type**: `application/json`

**Success Response (200 OK)**:
```json
{
  "status": {
    "type": "string",
    "description": "Health status of the service",
    "example": "healthy"
  },
  "timestamp": {
    "type": "string",
    "format": "date-time",
    "description": "ISO 8601 timestamp of the health check",
    "example": "2025-12-22T10:00:00Z"
  },
  "version": {
    "type": "string",
    "description": "Version of the service",
    "example": "1.0.0"
  }
}
```

## Terms and Conditions
- All API requests must comply with the textbook's educational purpose
- Responses are generated by AI and should be verified for accuracy
- The service is designed for educational use related to Physical AI and Humanoid Robotics
- Rate limits may apply to prevent abuse